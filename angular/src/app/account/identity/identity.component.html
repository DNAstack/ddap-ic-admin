<ddaplib-header label="My Identity"
             iconClass="icon icon-profile">
</ddaplib-header>

<ddaplib-main>
  <h2>Personal Information</h2>

  <ng-container *ngIf="userInfo$ | async as userInfo; else unauthenticated">
    <ddap-personal-info-form [user]="userInfo">
    </ddap-personal-info-form>
    <div class="flex align-horizontal--end">
      <button mat-button
              color="warn"
              class="uppercase"
              data-se="btn-close-user-account"
              (click)="closeAccount(userInfo)">
        Close Account
      </button>
      <button mat-raised-button
              color="primary"
              class="uppercase"
              data-se="btn-save-personal-info"
              (click)="updatePersonalInfo()">
        Update Personal Information
      </button>
    </div>
  </ng-container>
  <ng-template #unauthenticated>
    <mat-progress-bar class="ddap-card-loader"
                      mode="indeterminate">
    </mat-progress-bar>
  </ng-template>

  <mat-divider></mat-divider>

  <ng-container *ngIf="userInfo$ | async as userInfo">
    <ddap-connected-accounts-section [realm]="realm"
                                     [userInfo]="userInfo">
    </ddap-connected-accounts-section>
  </ng-container>
</ddaplib-main>
